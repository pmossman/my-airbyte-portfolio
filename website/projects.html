<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Browse Parker Mossman's focused project deep-dives - 22 significant engineering deliverables at Airbyte.">
  <title>Projects | Parker Mossman</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/components.css">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš¡</text></svg>">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <a href="index.html" class="logo">
        <div class="logo-icon">PM</div>
        <span>Parker Mossman</span>
      </a>

      <nav class="nav" id="nav">
        <a href="index.html" class="nav-link">Home</a>
        <a href="domains.html" class="nav-link">Domains</a>
        <a href="projects.html" class="nav-link active">Projects</a>

        <div class="nav-social">
          <a href="https://github.com/pmossman" target="_blank" rel="noopener" aria-label="GitHub">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
          </a>
          <a href="https://www.linkedin.com/in/parker-mossman-23043a7a/" target="_blank" rel="noopener" aria-label="LinkedIn">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
            </svg>
          </a>
        </div>
      </nav>

      <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle menu">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main">
    <!-- Page Header -->
    <section class="page-header">
      <div class="container">
        <h1 class="page-title">Projects</h1>
        <p class="page-description">
          22 focused engineering deliverables spanning 2022-2025. Each project represents a significant feature or system built from design through deployment.
        </p>
      </div>
    </section>

    <!-- Visual Timeline -->
    <section class="section-sm" style="padding-top: 0;">
      <div class="container">
        <!-- Legend -->
        <div class="timeline-legend">
          <div class="legend-item">
            <span class="legend-color" style="background-color: var(--cat-billing)"></span>
            <span>Billing</span>
          </div>
          <div class="legend-item">
            <span class="legend-color" style="background-color: var(--cat-sso)"></span>
            <span>SSO & Auth</span>
          </div>
          <div class="legend-item">
            <span class="legend-color" style="background-color: var(--cat-permissions)"></span>
            <span>Permissions</span>
          </div>
          <div class="legend-item">
            <span class="legend-color" style="background-color: var(--cat-infrastructure)"></span>
            <span>Infrastructure</span>
          </div>
          <div class="legend-item">
            <span class="legend-color" style="background-color: var(--cat-data)"></span>
            <span>Data & Jobs</span>
          </div>
        </div>

        <!-- Gantt Chart -->
        <div class="gantt-container">
          <!-- Year headers -->
          <div class="gantt-header">
            <div class="gantt-label-col"></div>
            <div class="gantt-chart-col">
              <div class="gantt-years" id="ganttYears"></div>
              <div class="gantt-months" id="ganttMonths"></div>
            </div>
          </div>

          <!-- Project rows -->
          <div class="gantt-body" id="ganttBody"></div>
        </div>
      </div>
    </section>

    <!-- Project List -->
    <section class="section" style="background-color: var(--bg-secondary);">
      <div class="container">
        <!-- Search and Filter -->
        <div class="filter-bar">
          <!-- Search Input -->
          <div class="search-section">
            <input type="text" id="searchInput" class="search-input" placeholder="Search projects by name, technology, or description...">
          </div>

          <div class="filter-section">
            <label class="filter-label">Filter by Category:</label>
            <div class="filter-tags" id="categoryFilters">
              <button class="filter-tag active" data-category="all">All</button>
              <button class="filter-tag" data-category="billing" style="--tag-color: #d29922">Billing</button>
              <button class="filter-tag" data-category="sso" style="--tag-color: #f0883e">SSO & Auth</button>
              <button class="filter-tag" data-category="permissions" style="--tag-color: #a371f7">Permissions</button>
              <button class="filter-tag" data-category="infrastructure" style="--tag-color: #3fb950">Infrastructure</button>
              <button class="filter-tag" data-category="data" style="--tag-color: #39c5cf">Data & APIs</button>
            </div>
          </div>

          <div class="filter-summary">
            <span class="filter-count">Showing <strong id="projectCount">22</strong> projects</span>
            <button class="btn btn-ghost btn-sm" id="clearFilters" style="display: none;">Clear Filters</button>
          </div>
        </div>

        <!-- Projects List -->
        <div class="projects-list" id="projectsList">
          <!-- 2025 Projects -->
          <div class="year-section">
            <h2 class="year-header">2025</h2>

            <a href="project/domain-verification.html" class="project-card" data-category="sso">
              <div class="project-header">
                <h3 class="project-title">Domain Verification System</h3>
                <span class="project-period">Oct-Nov 2025</span>
              </div>
              <p class="project-desc">DNS-based domain verification for enterprise SSO with exponential backoff checking and RFC 1464 compliance.</p>
              <div class="project-meta">
                <span class="project-tech">Kotlin</span>
                <span class="project-tech">DNS/JNDI</span>
                <span class="project-tech">Cron</span>
                <span class="project-lines">~1,500 lines</span>
              </div>
            </a>

            <a href="project/dataplane-health-monitoring.html" class="project-card" data-category="infrastructure">
              <div class="project-header">
                <h3 class="project-title">Dataplane Health Monitoring</h3>
                <span class="project-period">Oct-Nov 2025</span>
              </div>
              <p class="project-desc">Health monitoring infrastructure for self-hosted dataplanes with heartbeat logging, tiered status calculation, and cleanup.</p>
              <div class="project-meta">
                <span class="project-tech">Kotlin</span>
                <span class="project-tech">PostgreSQL</span>
                <span class="project-tech">Cron</span>
                <span class="project-lines">~1,600 lines</span>
              </div>
            </a>

            <a href="project/sso-test-validate.html" class="project-card" data-category="sso">
              <div class="project-header">
                <h3 class="project-title">SSO Test/Validate Workflow</h3>
                <span class="project-period">Sep-Oct 2025</span>
              </div>
              <p class="project-desc">Two-step "test and activate" workflow for SSO configuration with OAuth popup handling and token validation.</p>
              <div class="project-meta">
                <span class="project-tech">Kotlin</span>
                <span class="project-tech">React</span>
                <span class="project-tech">Keycloak</span>
                <span class="project-lines">~2,200 lines</span>
              </div>
            </a>

            <a href="project/workspace-permission-filtering.html" class="project-card" data-category="permissions">
              <div class="project-header">
                <h3 class="project-title">Workspace Permission Filtering</h3>
                <span class="project-period">Aug 2025</span>
              </div>
              <p class="project-desc">Fine-grained permission-based filtering for workspace listings with CTE-based SQL queries.</p>
              <div class="project-meta">
                <span class="project-tech">Kotlin</span>
                <span class="project-tech">PostgreSQL</span>
                <span class="project-lines">~700 lines</span>
              </div>
            </a>

            <a href="project/secrets-architecture.html" class="project-card" data-category="infrastructure">
              <div class="project-header">
                <h3 class="project-title">Secret Management Architecture</h3>
                <span class="project-period">Mar-Apr 2025</span>
              </div>
              <p class="project-desc">Three-table secret reference architecture supporting Airbyte-managed and external secrets (AWS, GCP, Azure, Vault).</p>
              <div class="project-meta">
                <span class="project-tech">Kotlin</span>
                <span class="project-tech">AWS/GCP/Azure</span>
                <span class="project-tech">Vault</span>
                <span class="project-lines">~5,700 lines</span>
              </div>
            </a>
          </div>

          <!-- 2024 Projects -->
          <div class="year-section">
            <h2 class="year-header">2024</h2>

            <a href="project/connection-auto-disable.html" class="project-card" data-category="billing">
              <div class="project-header">
                <h3 class="project-title">Connection Auto-Disable System</h3>
                <span class="project-period">Oct-Dec 2024</span>
              </div>
              <p class="project-desc">Service layer for automatically disabling connections on billing issues with timeline events and type-safe IDs.</p>
              <div class="project-meta">
                <span class="project-tech">Kotlin</span>
                <span class="project-tech">Micronaut</span>
                <span class="project-lines">~1,500 lines</span>
              </div>
            </a>

            <a href="project/orb-subscription-integration.html" class="project-card" data-category="billing">
              <div class="project-header">
                <h3 class="project-title">Orb Subscription Integration</h3>
                <span class="project-period">Dec 2024</span>
              </div>
              <p class="project-desc">Webhook processing for Orb subscription lifecycle events with idempotent handling and state validation.</p>
              <div class="project-meta">
                <span class="project-tech">Kotlin</span>
                <span class="project-tech">Orb API</span>
                <span class="project-tech">Webhooks</span>
                <span class="project-lines">~500 lines</span>
              </div>
            </a>

            <a href="project/grace-period-workflow.html" class="project-card" data-category="billing">
              <div class="project-header">
                <h3 class="project-title">Billing Grace Period Workflow</h3>
                <span class="project-period">Oct 2024</span>
              </div>
              <p class="project-desc">Temporal-based workflow for payment grace periods with state machine validation and Segment analytics.</p>
              <div class="project-meta">
                <span class="project-tech">Kotlin</span>
                <span class="project-tech">Temporal</span>
                <span class="project-tech">Stripe</span>
                <span class="project-lines">~600 lines</span>
              </div>
            </a>

            <a href="project/stripe-webhook-consolidation.html" class="project-card" data-category="billing">
              <div class="project-header">
                <h3 class="project-title">Stripe Webhook Consolidation</h3>
                <span class="project-period">Sep-Oct 2024</span>
              </div>
              <p class="project-desc">Consolidated Stripe webhooks into single endpoint with dedicated thread pool and signing verification.</p>
              <div class="project-meta">
                <span class="project-tech">Kotlin</span>
                <span class="project-tech">Stripe</span>
                <span class="project-tech">Webhooks</span>
                <span class="project-lines">~450 lines</span>
              </div>
            </a>

            <a href="project/organization-payment-config.html" class="project-card" data-category="billing">
              <div class="project-header">
                <h3 class="project-title">Organization Payment Config</h3>
                <span class="project-period">Aug 2024</span>
              </div>
              <p class="project-desc">Foundational data model for organization-level billing with six payment states and usage overrides.</p>
              <div class="project-meta">
                <span class="project-tech">Kotlin</span>
                <span class="project-tech">PostgreSQL</span>
                <span class="project-tech">Micronaut Data</span>
                <span class="project-lines">~600 lines</span>
              </div>
            </a>

            <a href="project/permission-hierarchy.html" class="project-card" data-category="permissions">
              <div class="project-header">
                <h3 class="project-title">Permission Hierarchy System</h3>
                <span class="project-period">Oct 2023-Apr 2024</span>
              </div>
              <p class="project-desc">Hierarchical permission model where org-level permissions grant workspace access with redundancy prevention.</p>
              <div class="project-meta">
                <span class="project-tech">Java</span>
                <span class="project-tech">Kotlin</span>
                <span class="project-tech">Micronaut Security</span>
                <span class="project-lines">~2,500 lines</span>
              </div>
            </a>
          </div>

          <!-- 2023 Projects -->
          <div class="year-section">
            <h2 class="year-header">2023</h2>

            <a href="project/enterprise-rbac.html" class="project-card" data-category="permissions">
              <div class="project-header">
                <h3 class="project-title">Enterprise RBAC Foundation</h3>
                <span class="project-period">Oct-Dec 2023</span>
              </div>
              <p class="project-desc">Implemented enterprise Role-Based Access Control with granular permission-based roles replacing the simple instance_admin model.</p>
              <div class="project-meta">
                <span class="project-tech">Java</span>
                <span class="project-tech">Kotlin</span>
                <span class="project-tech">Micronaut Security</span>
                <span class="project-lines">~3,500 lines</span>
              </div>
            </a>

            <a href="project/first-user-admin-flow.html" class="project-card" data-category="permissions">
              <div class="project-header">
                <h3 class="project-title">First User Admin & Invitations</h3>
                <span class="project-period">Nov 2023-Jan 2024</span>
              </div>
              <p class="project-desc">First user becomes admin flow with comprehensive invitation handling for expired and duplicate cases.</p>
              <div class="project-meta">
                <span class="project-tech">Java</span>
                <span class="project-tech">Kotlin</span>
                <span class="project-tech">Keycloak</span>
                <span class="project-lines">~1,200 lines</span>
              </div>
            </a>

            <a href="project/cron-scheduling-fix.html" class="project-card" data-category="data">
              <div class="project-header">
                <h3 class="project-title">Cron Scheduling Feature Flag Fix</h3>
                <span class="project-period">Oct 2023</span>
              </div>
              <p class="project-desc">Fixed critical cron scheduling bugs with minimum interval enforcement and load-distribution jitter.</p>
              <div class="project-meta">
                <span class="project-tech">Java</span>
                <span class="project-tech">Quartz</span>
                <span class="project-tech">Temporal</span>
                <span class="project-lines">~600 lines</span>
              </div>
            </a>

            <a href="project/keycloak-sso-foundation.html" class="project-card" data-category="sso">
              <div class="project-header">
                <h3 class="project-title">Keycloak SSO Foundation</h3>
                <span class="project-period">Jul-Sep 2023</span>
              </div>
              <p class="project-desc">Established enterprise SSO foundation by integrating Keycloak as the identity provider with Kubernetes deployment and token validation.</p>
              <div class="project-meta">
                <span class="project-tech">Keycloak</span>
                <span class="project-tech">Kubernetes</span>
                <span class="project-tech">Java</span>
                <span class="project-lines">~2,500 lines</span>
              </div>
            </a>

            <a href="project/schedule-jitter.html" class="project-card" data-category="data">
              <div class="project-header">
                <h3 class="project-title">Schedule Jitter System</h3>
                <span class="project-period">Jun-Jul 2023</span>
              </div>
              <p class="project-desc">Configurable schedule jitter to distribute sync execution times and prevent thundering herd problems with frequency-based bucketing.</p>
              <div class="project-meta">
                <span class="project-tech">Java</span>
                <span class="project-tech">Temporal</span>
                <span class="project-lines">~400 lines</span>
              </div>
            </a>

            <a href="project/cloud-micronaut-migration.html" class="project-card" data-category="infrastructure">
              <div class="project-header">
                <h3 class="project-title">Cloud Micronaut Migration</h3>
                <span class="project-period">May 2023</span>
              </div>
              <p class="project-desc">Migrated Cloud Server to Micronaut framework enabling modern DI, faster startup, and alignment with OSS server architecture.</p>
              <div class="project-meta">
                <span class="project-tech">Java</span>
                <span class="project-tech">Micronaut</span>
                <span class="project-tech">Gradle</span>
                <span class="project-lines">~2,000 lines</span>
              </div>
            </a>
          </div>

          <!-- 2022 Projects -->
          <div class="year-section">
            <h2 class="year-header">2022</h2>

            <a href="project/multi-region-geography.html" class="project-card" data-category="infrastructure">
              <div class="project-header">
                <h3 class="project-title">Multi-Region Geography</h3>
                <span class="project-period">Aug-Nov 2022</span>
              </div>
              <p class="project-desc">Data residency system enabling customers to select where their data is processed with workspace and connection-level geography controls.</p>
              <div class="project-meta">
                <span class="project-tech">Java</span>
                <span class="project-tech">PostgreSQL</span>
                <span class="project-tech">AWS</span>
                <span class="project-lines">~600 lines</span>
              </div>
            </a>

            <a href="project/api-performance-optimization.html" class="project-card" data-category="data">
              <div class="project-header">
                <h3 class="project-title">API Performance Optimization</h3>
                <span class="project-period">Sep 2022</span>
              </div>
              <p class="project-desc">Optimized critical API endpoints with efficient queries, lightweight endpoints, and selective data fetching.</p>
              <div class="project-meta">
                <span class="project-tech">Java</span>
                <span class="project-tech">PostgreSQL</span>
                <span class="project-tech">REST API</span>
                <span class="project-lines">~500 lines</span>
              </div>
            </a>

            <a href="project/temporal-cloud-migration.html" class="project-card" data-category="infrastructure">
              <div class="project-header">
                <h3 class="project-title">Temporal Cloud Migration</h3>
                <span class="project-period">Jun 2022</span>
              </div>
              <p class="project-desc">Migrated workflow orchestration to Temporal Cloud with dual-mode configuration and SSL/TLS authentication.</p>
              <div class="project-meta">
                <span class="project-tech">Java</span>
                <span class="project-tech">Temporal</span>
                <span class="project-tech">SSL/TLS</span>
                <span class="project-lines">~350 lines</span>
              </div>
            </a>

            <a href="project/kubernetes-pod-management.html" class="project-card" data-category="infrastructure">
              <div class="project-header">
                <h3 class="project-title">Kubernetes Pod Management</h3>
                <span class="project-period">Feb-Mar 2022</span>
              </div>
              <p class="project-desc">Enhanced Kubernetes connector pod initialization with timeouts, per-job-type configuration, and process isolation.</p>
              <div class="project-meta">
                <span class="project-tech">Java</span>
                <span class="project-tech">Kubernetes</span>
                <span class="project-tech">Docker</span>
                <span class="project-lines">~300 lines</span>
              </div>
            </a>

            <a href="project/job-failure-tracking.html" class="project-card" data-category="data">
              <div class="project-header">
                <h3 class="project-title">Job Failure Tracking</h3>
                <span class="project-period">Jan-Feb 2022</span>
              </div>
              <p class="project-desc">Enhanced job and attempt tracking with failure summaries, per-stream record counts, and structured failure reasons.</p>
              <div class="project-meta">
                <span class="project-tech">Java</span>
                <span class="project-tech">PostgreSQL</span>
                <span class="project-tech">REST API</span>
                <span class="project-lines">~450 lines</span>
              </div>
            </a>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <p class="footer-text">
          Engineering contributions to <a href="https://github.com/airbytehq/airbyte-platform" target="_blank" rel="noopener">airbyte-platform</a>
        </p>
        <div class="footer-links">
          <a href="https://github.com/pmossman" target="_blank" rel="noopener">GitHub</a>
          <a href="https://www.linkedin.com/in/parker-mossman-23043a7a/" target="_blank" rel="noopener">LinkedIn</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="js/data.js"></script>
  <script src="js/main.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const { PROJECTS, getDomainById } = window.PORTFOLIO_DATA;

      // Category colors
      const categoryColors = {
        billing: 'var(--cat-billing)',
        sso: 'var(--cat-sso)',
        permissions: 'var(--cat-permissions)',
        infrastructure: 'var(--cat-infrastructure)',
        data: 'var(--cat-data)'
      };

      // Timeline range: Jan 2022 to Dec 2025
      const startDate = new Date('2022-01-01');
      const endDate = new Date('2025-12-31');
      const totalMonths = (endDate.getFullYear() - startDate.getFullYear()) * 12 + (endDate.getMonth() - startDate.getMonth()) + 1;

      // Build year/month headers
      function buildHeaders() {
        const yearsContainer = document.getElementById('ganttYears');
        const monthsContainer = document.getElementById('ganttMonths');

        let yearsHtml = '';
        let monthsHtml = '';

        for (let year = 2022; year <= 2025; year++) {
          yearsHtml += `<div class="gantt-year" style="width: ${(12 / totalMonths) * 100}%">${year}</div>`;

          for (let month = 0; month < 12; month++) {
            const monthNames = ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'];
            monthsHtml += `<div class="gantt-month">${monthNames[month]}</div>`;
          }
        }

        yearsContainer.innerHTML = yearsHtml;
        monthsContainer.innerHTML = monthsHtml;
      }

      // Calculate position and width for a project bar
      function getBarStyle(project) {
        const pStart = new Date(project.period.start + '-01');
        const pEnd = new Date(project.period.end + '-01');

        // Add one month to end date to make it inclusive
        pEnd.setMonth(pEnd.getMonth() + 1);

        const startOffset = (pStart.getFullYear() - startDate.getFullYear()) * 12 + (pStart.getMonth() - startDate.getMonth());
        const duration = (pEnd.getFullYear() - pStart.getFullYear()) * 12 + (pEnd.getMonth() - pStart.getMonth());

        const left = (startOffset / totalMonths) * 100;
        const width = Math.max((duration / totalMonths) * 100, 2); // Min 2% width for visibility

        return { left: `${left}%`, width: `${width}%` };
      }

      // Format period for display
      function formatPeriod(period) {
        const start = new Date(period.start + '-01');
        const end = new Date(period.end + '-01');
        const opts = { month: 'short', year: 'numeric' };

        if (period.start === period.end) {
          return start.toLocaleDateString('en-US', opts);
        }
        return `${start.toLocaleDateString('en-US', opts)} - ${end.toLocaleDateString('en-US', opts)}`;
      }

      // Build Gantt chart rows
      function buildGanttChart() {
        const ganttBody = document.getElementById('ganttBody');

        // Sort projects by start date
        const sortedProjects = [...PROJECTS].sort((a, b) => {
          return new Date(a.period.start) - new Date(b.period.start);
        });

        ganttBody.innerHTML = sortedProjects.map(project => {
          const style = getBarStyle(project);
          const color = categoryColors[project.category] || 'var(--accent-blue)';

          return `
            <div class="gantt-row" data-project="${project.id}">
              <div class="gantt-label-col">
                <a href="project/${project.id}.html" class="gantt-project-name">${project.name}</a>
              </div>
              <div class="gantt-chart-col">
                <div class="gantt-bar-container">
                  <div class="gantt-grid-lines"></div>
                  <a href="project/${project.id}.html"
                     class="gantt-bar"
                     style="left: ${style.left}; width: ${style.width}; background-color: ${color};"
                     title="${project.name}: ${formatPeriod(project.period)}">
                  </a>
                </div>
              </div>
            </div>
          `;
        }).join('');
      }

      // Initialize Gantt chart
      buildHeaders();
      buildGanttChart();

      // Project list filtering
      const categoryFilters = document.getElementById('categoryFilters');
      const projectCards = document.querySelectorAll('.project-card');
      const searchInput = document.getElementById('searchInput');
      const projectCount = document.getElementById('projectCount');
      const clearFiltersBtn = document.getElementById('clearFilters');

      let currentCategory = 'all';
      let searchQuery = '';

      function updateProjects() {
        const query = searchQuery.toLowerCase().trim();
        let visibleCount = 0;

        projectCards.forEach(card => {
          const matchesCategory = currentCategory === 'all' || card.dataset.category === currentCategory;

          let matchesSearch = true;
          if (query) {
            const title = card.querySelector('.project-title')?.textContent.toLowerCase() || '';
            const desc = card.querySelector('.project-desc')?.textContent.toLowerCase() || '';
            const techs = Array.from(card.querySelectorAll('.project-tech')).map(t => t.textContent.toLowerCase()).join(' ');
            matchesSearch = title.includes(query) || desc.includes(query) || techs.includes(query);
          }

          if (matchesCategory && matchesSearch) {
            card.style.display = 'flex';
            visibleCount++;
          } else {
            card.style.display = 'none';
          }
        });

        document.querySelectorAll('.year-section').forEach(section => {
          const hasVisible = Array.from(section.querySelectorAll('.project-card')).some(card =>
            card.style.display !== 'none'
          );
          section.style.display = hasVisible ? 'block' : 'none';
        });

        projectCount.textContent = visibleCount;
        clearFiltersBtn.style.display = (currentCategory !== 'all' || searchQuery.trim()) ? 'block' : 'none';
        updateUrlState();
      }

      function updateUrlState() {
        const params = new URLSearchParams();
        if (currentCategory !== 'all') params.set('category', currentCategory);
        if (searchQuery.trim()) params.set('q', searchQuery.trim());

        const newUrl = params.toString()
          ? `${window.location.pathname}?${params.toString()}`
          : window.location.pathname;
        history.replaceState(null, '', newUrl);
      }

      function readUrlState() {
        const params = new URLSearchParams(window.location.search);

        const categoryParam = params.get('category');
        if (categoryParam) {
          currentCategory = categoryParam;
          categoryFilters.querySelectorAll('.filter-tag').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.category === categoryParam);
          });
        }

        const searchParam = params.get('q');
        if (searchParam && searchInput) {
          searchQuery = searchParam;
          searchInput.value = searchParam;
        }
      }

      categoryFilters.addEventListener('click', (e) => {
        if (!e.target.classList.contains('filter-tag')) return;
        categoryFilters.querySelectorAll('.filter-tag').forEach(btn => btn.classList.remove('active'));
        e.target.classList.add('active');
        currentCategory = e.target.dataset.category;
        updateProjects();
      });

      let debounceTimeout;
      searchInput.addEventListener('input', (e) => {
        clearTimeout(debounceTimeout);
        debounceTimeout = setTimeout(() => {
          searchQuery = e.target.value;
          updateProjects();
        }, 150);
      });

      clearFiltersBtn.addEventListener('click', () => {
        currentCategory = 'all';
        searchQuery = '';
        searchInput.value = '';
        categoryFilters.querySelectorAll('.filter-tag').forEach(btn => {
          btn.classList.toggle('active', btn.dataset.category === 'all');
        });
        updateProjects();
      });

      readUrlState();
      updateProjects();
    });
  </script>

  <style>
    :root {
      --cat-billing: #d29922;
      --cat-sso: #f0883e;
      --cat-permissions: #a371f7;
      --cat-infrastructure: #3fb950;
      --cat-data: #39c5cf;
    }

    .timeline-legend {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-4);
      padding: var(--space-4);
      background-color: var(--bg-secondary);
      border: 1px solid var(--border-default);
      border-radius: var(--radius-lg);
      margin-bottom: var(--space-6);
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      font-size: var(--text-sm);
      color: var(--text-secondary);
    }

    .legend-color {
      width: 12px;
      height: 12px;
      border-radius: var(--radius-sm);
    }

    /* Gantt Chart */
    .gantt-container {
      background-color: var(--bg-secondary);
      border: 1px solid var(--border-default);
      border-radius: var(--radius-lg);
      overflow: hidden;
    }

    .gantt-header {
      display: flex;
      border-bottom: 1px solid var(--border-default);
      background-color: var(--bg-tertiary);
    }

    .gantt-label-col {
      width: 200px;
      flex-shrink: 0;
      padding: var(--space-3) var(--space-4);
      border-right: 1px solid var(--border-default);
    }

    .gantt-chart-col {
      flex-grow: 1;
      min-width: 0;
      overflow-x: auto;
    }

    .gantt-years {
      display: flex;
      border-bottom: 1px solid var(--border-muted);
    }

    .gantt-year {
      text-align: center;
      font-weight: 600;
      font-size: var(--text-sm);
      color: var(--text-primary);
      padding: var(--space-2) 0;
      border-right: 1px solid var(--border-muted);
    }

    .gantt-year:last-child {
      border-right: none;
    }

    .gantt-months {
      display: flex;
    }

    .gantt-month {
      flex: 1;
      text-align: center;
      font-size: var(--text-xs);
      color: var(--text-muted);
      padding: var(--space-1) 0;
      border-right: 1px solid var(--border-muted);
    }

    .gantt-month:last-child {
      border-right: none;
    }

    .gantt-body {
      max-height: 450px;
      overflow-y: auto;
    }

    .gantt-row {
      display: flex;
      border-bottom: 1px solid var(--border-muted);
      transition: background-color var(--transition-fast);
    }

    .gantt-row:hover {
      background-color: var(--bg-tertiary);
    }

    .gantt-row:last-child {
      border-bottom: none;
    }

    .gantt-project-name {
      font-size: var(--text-sm);
      color: var(--text-primary);
      text-decoration: none;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: block;
    }

    .gantt-project-name:hover {
      color: var(--accent-blue);
    }

    .gantt-bar-container {
      position: relative;
      height: 100%;
      min-height: 36px;
    }

    .gantt-grid-lines {
      position: absolute;
      inset: 0;
      display: flex;
    }

    .gantt-bar {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      height: 20px;
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all var(--transition-fast);
      opacity: 0.85;
    }

    .gantt-bar:hover {
      opacity: 1;
      transform: translateY(-50%) scale(1.02);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    /* Projects List */
    .projects-list {
      display: flex;
      flex-direction: column;
      gap: var(--space-8);
      margin-top: var(--space-6);
    }

    .year-section {
      display: flex;
      flex-direction: column;
      gap: var(--space-4);
    }

    .year-header {
      font-size: var(--text-2xl);
      font-weight: 700;
      font-family: var(--font-mono);
      color: var(--accent-blue);
      margin-bottom: var(--space-2);
      padding-bottom: var(--space-2);
      border-bottom: 2px solid var(--border-muted);
    }

    .project-card {
      display: flex;
      flex-direction: column;
      gap: var(--space-3);
      padding: var(--space-5);
      background-color: var(--bg-primary);
      border: 1px solid var(--border-default);
      border-radius: var(--radius-lg);
      text-decoration: none;
      transition: all var(--transition-fast);
    }

    .project-card:hover {
      border-color: var(--accent-blue);
      transform: translateX(4px);
    }

    .project-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: var(--space-4);
    }

    .project-title {
      font-size: var(--text-lg);
      font-weight: 600;
      color: var(--text-primary);
      margin: 0;
    }

    .project-period {
      font-size: var(--text-xs);
      font-family: var(--font-mono);
      color: var(--text-muted);
      white-space: nowrap;
    }

    .project-desc {
      font-size: var(--text-sm);
      color: var(--text-secondary);
      line-height: 1.6;
      margin: 0;
    }

    .project-meta {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-2);
      margin-top: var(--space-1);
    }

    .project-tech {
      font-size: var(--text-xs);
      font-family: var(--font-mono);
      padding: 2px 8px;
      background-color: var(--bg-tertiary);
      border-radius: var(--radius-sm);
      color: var(--text-muted);
    }

    .project-lines {
      font-size: var(--text-xs);
      font-family: var(--font-mono);
      color: var(--accent-green);
    }

    .search-section {
      margin-bottom: var(--space-4);
    }

    .search-input {
      width: 100%;
      padding: var(--space-3) var(--space-4);
      background-color: var(--bg-tertiary);
      border: 1px solid var(--border-default);
      border-radius: var(--radius-md);
      color: var(--text-primary);
      font-size: var(--text-base);
      outline: none;
      transition: border-color var(--transition-fast);
    }

    .search-input::placeholder {
      color: var(--text-muted);
    }

    .search-input:focus {
      border-color: var(--accent-blue);
    }

    .filter-summary {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-top: var(--space-3);
      border-top: 1px solid var(--border-muted);
      margin-top: var(--space-4);
    }

    .filter-count {
      font-size: var(--text-sm);
      color: var(--text-secondary);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .gantt-label-col {
        width: 120px;
        font-size: var(--text-xs);
      }

      .gantt-container {
        overflow-x: auto;
      }

      .gantt-chart-col {
        min-width: 500px;
      }
    }
  </style>
</body>
</html>
